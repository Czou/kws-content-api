<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Test 2 - Video, options no filters</title>

    <script src="../src/main/resources/dist/kws-content-api.js"></script>

    <script src="config.js"></script>
  </head>
  <body>
    <video id="remoteVideo" autoplay></video>

    <span>
      <label for="url">Url</label>
      <input id="url" name="url" />
    </span>
    <button id="run" onclick="run()">Run</button>
    <span>
      <label for="status">Status</label>
      <input id="status" name="status" readonly />
    </span>
    <textarea id="output" rows=10 style="width: 100%"></textarea>

    <script>
      var remoteVideo = document.getElementById('remoteVideo');
      var inputStatus = document.getElementById('status');

      var inputUrl = document.getElementById('url');
      inputUrl.value = config.videoUrls.test2;

      remoteVideo.addEventListener('play', function(event)
      {
        inputStatus.value = 'play';
        console.log(status.value);
      });
/*       remoteVideo.addEventListener('playing', function(event)
      {
        inputStatus.value = 'playing';
        console.log(status.value);
      });
 */
      function log(text)
      {
        var textNode = document.createTextNode(text+"\n");
        document.getElementById('output').appendChild(textNode);
      }
    </script>

    <script>
      function run()
      {
        var endpoint = inputUrl.value;
        var options =
        {
          remoteVideoTag: "remoteVideo",
          audio: "recvonly",
          video: "recvonly"
        };

        var KwsContentPlayer = kwsContentApi.KwsContentPlayer;
        var conn = new KwsContentPlayer(endpoint, options);

        conn.onstart = function(event)
        {
          log("Connection created");
        }

        conn.onterminate = function(event)
        {
          log("Connection terminated");
        }

        conn.onerror = function(error)
        {
          log("Error: "+error.message);
        }
      }
    </script>
  </body>
</html>